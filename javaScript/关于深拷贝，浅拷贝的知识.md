## å…³äºæ·±æ‹·è´ & æµ…æ‹·è´çš„çŸ¥è¯†

(æŸ¥çœ‹æ·±æ‹·è´æµ…æ‹·è´çš„çŸ¥è¯†å‰ï¼Œè¯·å…ˆäº†è§£å †æ ˆé—®é¢˜)

<a name="jump" href="../è®¡ç®—æœºç½‘ç»œçŸ¥è¯†/å…³äºå †æ ˆé˜Ÿåˆ—äº†è§£.md#test">å…³äºå †æ ˆé˜Ÿåˆ—äº†è§£ã€‹ã€‹ã€‹ã€‹</a>

- åŸºæœ¬ç±»å‹å­˜æ”¾åœ¨æ ˆå†…å­˜ä¸­çš„ç®€å•æ•°æ®æ®µï¼Œæ•°æ®å¤§å°ç¡®å®šï¼Œå†…å­˜ç©ºé—´å¤§å°å¯ä»¥åˆ†é…ã€‚å› æ­¤åŸºæœ¬ç±»å‹ç”¨æµ…æ‹·è´å¯ä»¥æ­£å¸¸å¤åˆ¶ï¼Œå¹¶ä¸”ä¸å½±å“çˆ¶å…ƒç´ 

- å¼•ç”¨ç±»å‹å³å­˜æ”¾åœ¨å †å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œå˜é‡å®é™…ä¿å­˜çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘å¦å¤–ä¸€ä¸ªä½ç½®ã€‚ï¼ˆé€šä¿—è§£é‡Šï¼šå¼•ç”¨æ•°æ®ç±»å‹ï¼Œkeyå­˜åœ¨æ ˆä¸­ï¼Œvalueå­˜åœ¨å †ä¸­ï¼Œä½†æ ˆå†…å­˜ä¼šæä¾›ä¸€ä¸ªå¼•ç”¨çš„åœ°å€æŒ‡å‘å †å†…å­˜ä¸­çš„å€¼ï¼‰ï¼Œå½“å¼•ç”¨ç±»å‹è¿›è¡Œæ‹·è´çš„æ—¶å€™ï¼Œå…¶å®å¤åˆ¶çš„æ˜¯æ ˆä¸­çš„keyï¼Œå¹¶éå †é‡Œé¢çš„value



### æµ…æ‹·è´çš„è¿‡ç¨‹ï¼š

â€‹	åŸºæœ¬ç±»å‹æ‹·è´æ—¶ï¼Œåªæ˜¯åœ¨å†…å­˜ä¸­å¼€è¾Ÿæ–°çš„ç©ºé—´ï¼Œå’Œä»–çš„çˆ¶å…ƒç´ ï¼ˆè¢«æ‹·è´çš„å¯¹è±¡çš„å…ƒç´ ç§°ä»–ä¸ºçˆ¶å…ƒç´ ï¼‰ï¼Œå±äºäº’ä¸ç›¸å¹²çš„ä¸œè¥¿ã€‚

```javascript
//æµ…æ‹·è´çš„æ–¹æ³•

const shallowCopy = (obj)=>{
  var childs = {}
	for(let key in obj){
		childs[key] = obj[key]
	}
	return childs;
}

//ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°
const fatherObj = {name:'coco',id:1}
let childObj = shallowCopy(fatherObj)
childObj.name='kevin'

console.log(childObj)//{name:'kevin',id:1}

console.log(fatherObj)//{name:'coco',id:1}

/* çœ‹ï¼Œä¸Šé¢ğŸ‘†childObjæ”¹å˜äº†ï¼Œæ²¡æœ‰å½±å“fatherObj */
```



- æˆ‘å¼€å§‹æœ‰ä¸ªç–‘æƒ‘ï¼Œä¸æ˜¯è¯´å€¼æ˜¯å¼•ç”¨ç±»å‹çš„è¯å°±åº”è¯¥ç”¨æ·±æ‹·è´å—ï¼Ÿå¯¹è±¡ä»–æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹å€¼å•Šï¼Œç”¨ä¸Šé¢çš„æµ…æ‹·è´ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œä¸ºä»€ä¹ˆæœ‰çš„äººè¯´ä¸Šé¢çš„æ–¹æ³•å¹¶ä¸èƒ½å®Œå…¨æ‹·è´å®Œæ•´å¼•ç”¨ç±»å‹å‘¢ï¼Ÿï¼Ÿæ¥ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡

  ```javascript
  //ä¾æ—§æ²¿ç”¨ä¸Šé¢æµ…æ‹·è´çš„æ–¹æ³•
  var fatherObj={name:'coco',id:1,son:{age:22}}
  
  let childObj =shallowCopy(fatherObj)
  childObj.son.age=33
  
  console.log(childObj) 
  //{name:'coco',id:1,son:{age:33}}
  
  console.log(fatherObj)
  //{name:'coco',id:1,son:{age:33}}
  ```

  ğŸ˜±ğŸ˜±ğŸ˜±æ€ä¹ˆå›äº‹ï¼Œçˆ¶å…ƒç´ æ€ä¹ˆå˜äº†ï¼ï¼ï¼

  

  è§£ç­”ï¼š

  /:B-)/:B-)/:B-) å› ä¸ºæ·±æµ…æ‹·è´å°±æ˜¯éå†é€’å½’çš„è¿‡ç¨‹ï¼Œå½“éå†åˆ°çš„valueä¸ºå¼•ç”¨ç±»å‹çš„æ—¶å€™ï¼Œé‚£ä¹ˆä¿®æ”¹childçš„æ—¶å€™ï¼Œfatherä¹Ÿä¼šè¢«æ”¹å˜çš„ï¼Œæ‰€ä»¥æµ…æ‹·è´å¹¶ä¸é è°±ï¼Œæ¥çœ‹æ·±æ‹·è´å§ï¼ï¼ï¼å‘±å‘±å‘±â€¦â€¦

  ### æ·±æ‹·è´çš„è¿‡ç¨‹ï¼š

  ```javascript
  // æ–¹æ³•ä¸€
  function deepCopy(obj){
  	let v;
  	switch(typeof obj){
      case 'undefined':break;
      case 'string':v = obj="";break;
      case 'number':v=obj-0;break;
      case 'boolean':v=obj;break;
      case 'object':
        if(obj === null){
  				v = null;
  		}else{
        if(obj instanceof Array){
  				v = [];
          for(var i=0,len=obj.length;i<len;i++){
  					v.push(deepCopy(obj[i]));
  				}
  			}else{
  				v=[];
         	for(var key in obj){
  					v[key] = deepCopy(obj[key])
  				}
  			}
      }
        break;
      default:
        v = obj;break;
  	}
    return v;
  }
  ```

  

  ```javascript
  //æ–¹æ³•äºŒ
  function deepCopy(obj){
  	return JSON.parse(JSON.stringify(obj));
  }
  ```

  

```javascript
//æ–¹æ³•ä¸‰
 function deepCopy(obj){
    var newobj, obj;
    if (obj.constructor == Object){
        newobj = new obj.constructor();
    }else{
        newobj = new obj.constructor(obj.valueOf());//valueOf()æ–¹æ³•è¿”å› Array å¯¹è±¡çš„åŸå§‹å€¼
    }
    for(var key in obj){
        if ( newobj[key] != obj[key] ){
            if ( typeof(obj[key]) == 'object' ){
                newobj[key] = deepCopy(obj[key]);
            }else{
                newobj[key] = obj[key];
            }
        }
    }
    newobj.toString = obj.toString;
    newobj.valueOf = obj.valueOf;
    return newobj;
}
```

```javascript
// æ–¹æ³•å››
var cloneObj = function(obj){
    var str, newobj = obj.constructor === Array ? [] : {};
    if(typeof obj !== 'object'){
        return;
    } else if(window.JSON){
        str = JSON.stringify(obj), //ç³»åˆ—åŒ–å¯¹è±¡
        newobj = JSON.parse(str); //è¿˜åŸ
    } else {
        for(var i in obj){
            newobj[i] = typeof obj[i] === 'object' ? 
            cloneObj(obj[i]) : obj[i]; 
        }
    }
    return newobj;
};
```

```javascript
//æ–¹æ³•äº”
function deepCopy(p,c){
    c = c || {};
    for (var i in p){
        if(p.hasOwnProperty(i)){
            if(typeof p[i] === 'object'){
                c[i] = Array.isArray(p[i]) ? [] : {};
                deepCopy(p[i],c[i]);
            }else{
                c[i] = p[i];
            }
        }
    }
    return c;
}
```



ä¸Šé¢è´´å‡ºæ¥çš„æ·±å…‹éš†çš„æ–¹æ³•éƒ½æ¥è‡ªäºç™¾åº¦ï¼Œä½†å…¶å®å®ç°æ–¹å¼éƒ½æ˜¯éå†+é€’å½’å»å®ç°çš„ã€‚é‚£ä¹ˆéšä¾¿æŠ½å–ä¸€ç§æ–¹æ³•æ¥æ ¡éªŒä¸€ä¸‹å§ï¼ï¼

```javascript
//æ–¹æ³•äº”
function deepCopy(p,c){
	c = c || {};
  for (var i in p){
      if(p.hasOwnProperty(i)){
          if(typeof p[i] === 'object'){
        c[i] = Array.isArray(p[i]) ? [] : {};
        deepCopy(p[i],c[i]);
    }else{
        c[i] = p[i];
    }
}}
return c;
}

var fatherObj = {name:'coco',id:1,son:{age:22}}
var childObj = deepCopy(fatherObj)
childObj.son.age=33

console.log(childObj)//{name:'kevin',id:1,son:{age:33}}

console.log(fatherObj)//{name:'coco',id:1,son:{age:22}}

```

### jsä¸­çš„æ–¹æ³•ï¼Œå“ªäº›æ˜¯æµ…æ‹·è´ï¼Œå“ªäº›æ˜¯æ·±æ‹·è´ï¼Ÿ

ğŸŒºæµ…æ‹·è´ï¼šï¼ˆä¼šå‡ºç°æ”¹å˜åŸæ•°ç»„ï¼‰

- pop ï¼šåˆ é™¤æ•°ç»„çš„<font color='red'>æœ€åä¸€ä¸ªå…ƒç´ </font>ï¼Œå¹¶ä¸”æŠŠæ•°ç»„é•¿åº¦å‡1ï¼Œæœ€å<font color='red'>è¿”å›è¢«åˆ é™¤çš„å…ƒç´ å€¼</font>ã€‚è‹¥æ•°ç»„å·²ä¸ºç©ºï¼Œåˆ™popä¸æ”¹å˜æ•°ç»„ï¼Œå¹¶è¿”å›undefindå€¼

```javascript
var arr = [1,2,3,4]
var brr = arr.pop()

console.log(brr)	//4
console.log(arr)	// [1,2,3]
```

- reverseï¼šå°†æ•°ç»„çš„æ’åºé¢ å€’ä¸ºå€’å™

  ```javascript
  var arr = [{id:1},{id:2}]
  var brr = arr.reverse()
  
  console.log(brr)  //[{id:2},{id:1}]
  console.log(arr)	// [{id:2},{id:1}]
  ```

- sort:å¯¹æ•°ç»„æ’åº

  ```javascript
  var arr = [2,1,3,4]
  var brr = arr.sort()
  console.log(brr) //[1,2,3,4]
  console.log(arr) //[1,2,3,4]
  ```

- shift:æŠŠæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä»å…¶ä¸­åˆ é™¤ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼

  ```javascript
  var arr = [{id:1},{id:2}]
  var brr = arr.shift()
  
  console.log(brr) //{id:1}
  console.log(arr)	//[{id:2}]
  
  var arr = [1,2,3,4]
  var brr = arr.shift()
  
  console.log(brr) //1
  console.log(arr)	//[2,3,4]
  ```

- splice:ä»æ•°ç»„ä¸­æ·»åŠ /åˆ é™¤é¡¹ç›®ï¼Œç„¶åè¿”å›è¢«æ·»åŠ /åˆ é™¤çš„é¡¹ç›®

  ```javascript
  //æ·»åŠ 
  var arr = [2,1,3,4]
  var brr =arr.splice(1,2,6)
  
  console.log(arr)	// [2,6,4]
  console.log(brr)	// [1,3]
  
  //åˆ é™¤
  var arr = [2,1,3,4]
  var brr =arr.splice(1,2,6)
  
  console.log(brr)	//[1,3]
  console.log(arr)	// [2,4]
  ```

- unshift:å¯å‘æ•°ç»„çš„å¼€å¤´æ·»åŠ ä¸€ä¸ªæˆ–æ›´å¤šå…ƒç´ ï¼Œå¹¶è¿”å›æ–°çš„é•¿åº¦

  ```javascript
  var arr = [2,1,3,4]
  var brr = arr.unshift(1,2)
  console.log(brr)	//6(è¿”å›çš„æ˜¯é•¿åº¦)
  console.log(arr)	//[1, 2, 2, 1, 3, 4]
  ```

- Push:å¾€æ•°ç»„åé¢è¿½åŠ å…ƒç´ 

  ```javascript
  var arr = [1,2,3,4]
  var brr = arr.push(5,6)
  console.log(brr)	//6ï¼ˆè¿”å›çš„æ˜¯é•¿åº¦ï¼‰
  console.log(arr)	//[1, 2, 3, 4, 5, 6]
  ```



ğŸŒºæ·±æ‹·è´çš„æ–¹æ³•ï¼š

```
concatï¼Œjoin,slice,map
```

### å¾ªç¯å¼•ç”¨

çœ‹ä¼¼é€’å½’å·²ç»è§£å†³äº†æˆ‘ä»¬çš„é—®é¢˜ï¼Œä½†å…¶å®è¿˜æœ‰ä¸€ç§æƒ…å†µè¿˜æ²¡è€ƒè™‘åˆ°ï¼Œé‚£å°±æ˜¯å¾ªç¯å¼•ç”¨ï¼š

1.çˆ¶çº§å¼•ç”¨ï¼š

```javascript
const obj1 = {
	x:1,
	y:2
}
obj1.z = obj1;
const obj2 = deepCopy(obj1)
// æ­»å¾ªç¯ï¼Œæ ˆæº¢å‡ºäº†
```

<img src="/Users/cole/Library/Application Support/typora-user-images/image-20201207224507973.png" alt="image-20201207224507973" style="zoom:50%;" />

è§£å†³æ–¹æ¡ˆï¼š

```javascript
//es6å†™æ³•
function deepClone(origin,hashMap = new WeakMap){    //å¼±å¼•ç”¨ï¼ŒæŒ‡çš„æ˜¯å¯¹è±¡é”®åï¼ŒWeakMapä»…æ”¯æŒå¯¹è±¡
    if(origin === undefined || typeof origin !== 'object'){
        return origin;
    }
    if(origin instanceof Date){
        return new Date(origin)
    }
    if(origin instanceof RegExp){
        return new RegExp(origin);
    }

    const hashKey = hashMap.get(origin);
    if(hashKey){
        return hashKey;    //å¦‚æœå·²ç»è¢«å…‹éš†è¿‡ï¼Œé‚£ä¹ˆreturnæ‰
    }
    const target = new origin.constructor();    //new ä¸€ä¸ªæ–°çš„æ„é€ å‡½æ•°ï¼Œç”¨äºåŒºåˆ†å¼€è¢«æ‹·è´å€¼å’Œæ¥æ”¶æ·±æ‹·è´åçš„å€¼
    hashMap.set(origin,target);//æ²¡æ‰§è¡Œä¸€æ¬¡éå†å°±è®°å½•ä¸€æ¬¡
    
    for(let k in origin){
        if(origin.hasOwnProperty(k)){
            target[k] = deepClone(origin[k],hashMap)
        }
    }

    return target
}


const obj1 = {
    x: 1, 
    y: 2
};
obj1.z = obj1;

const obj2 = deepClone(obj1);
console.log(obj2)
```



![image-20201207233046483](/Users/cole/Library/Application Support/typora-user-images/image-20201207233046483.png)

- ### æ€»ç»“ï¼š

- - æ·±æµ…æ‹·è´å°±æ˜¯éå†é€’å½’çš„è¿‡ç¨‹ï¼Œå½“éå†åˆ°çš„valueä¸ºå¼•ç”¨ç±»å‹çš„æ—¶å€™ï¼Œé‚£ä¹ˆå¿…é¡»è¦ç”¨æ·±æ‹·è´æ‰èƒ½æŠŠå€¼æ‹·è´å®Œå…¨
  - å‡½æ•°ä¸èƒ½æ‹·è´
  - å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸‡ä¸‡è¦æ³¨æ„ä¸Šé¢æåˆ°çš„jsçš„å¸¸ç”¨æ–¹æ³•ï¼Œå¾ˆå¯èƒ½ä¸€ä¸å°å¿ƒå°±æŠŠåŸæ•°ç»„ç»™æ”¹äº†ï¼Œä½ å°±æ‡µé€¼äº†ï¼ï¼ğŸ˜³

