## **promise**

```javascript
promiseè¯­æ³•ï¼š
ä»¥ä¸‹ä¸ºpomiseçš„resolveï¼ˆæˆåŠŸï¼‰
runAsync=()=> {
	var p = new Promise(function (resolve, reject) {
	//åšä¸€äº›å¼‚æ­¥æ“ä½œ
    setTimeout(function () {
      console.log('æ‰§è¡Œå®Œæˆ');
      resolve('éšä¾¿ä»€ä¹ˆæ•°æ®');
    }, 2000);
    });
  return p;
  }
  componentDidMount(){
    runAsync().then(res => {
    	console.log(res, 'å›è°ƒå›æ¥çš„æ•°æ®')
    })
}

```

<img src="/var/folders/65/71xg97ds6hnc7_6xq9b987rh0000gp/T/com.yinxiang.Mac/WebKitDnD.RdlcmR/3971A685-DE1E-45C4-A18E-E0CCB5E19E5F.png" alt="3971A685-DE1E-45C4-A18E-E0CCB5E19E5F" style="zoom:75%;" />

**è§£å†³å›è°ƒåœ°ç‹±çš„æ–¹æ³•ï¼šé“¾å¼æ“ä½œ**

å›è°ƒå‡½æ•°å®¹æ˜“é€ æˆå›è°ƒåœ°ç‹±ï¼Œå°±æ˜¯å¤šå±‚å›è°ƒçš„é—®é¢˜ã€‚promiseå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

â€‹	<img src="/var/folders/65/71xg97ds6hnc7_6xq9b987rh0000gp/T/com.yinxiang.Mac/WebKitDnD.RzBhgU/5C56A84C-2038-4EB3-85C6-281F7AD93091.png" alt="5C56A84C-2038-4EB3-85C6-281F7AD93091" style="z:50%;" />



```javascript
runAsync1() {
var p = new Promise(function (resolve, reject) {
  //åšä¸€äº›å¼‚æ­¥æ“ä½œ
  setTimeout(function () {
  		resolve('11111æ•°æ®----');
  	}, 1000);
  });
  return p;
}
runAsync2() {
	var p = new Promise(function (resolve, reject) {
	//åšä¸€äº›å¼‚æ­¥æ“ä½œ
  setTimeout(function () {
   	 resolve('22222æ•°æ®-----');
    }, 2000);
    });
  return p;
  }
runAsync3() {
  var p = new Promise(function (resolve, reject) {
    //åšä¸€äº›å¼‚æ­¥æ“ä½œ
    setTimeout(function () {
    	resolve('3333æ•°æ®---');
    }, 2000);
  });
return p;
}
componentDidMount() {
  runAsync1()
  .then(function (data) {
    console.log(data, '111111');
    return runAsync2();
  })
  .then(function (data) {
    console.log(data, '22222222');
    return runAsync3();
  })
    .then(function (data) {
    console.log(data, '333333');
  })
}

```

**ä»¥ä¸‹ä¸ºpromiseçš„rejectï¼ˆå¤±è´¥ï¼‰**

rejectçš„ä½œç”¨æ˜¯è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œæ•è·é”™è¯¯ä¿¡æ¯è¦åœ¨catché‡Œé¢æ•æ‰

è¯­æ³•ï¼š

![36B7A424-58C7-4306-B403-5024E72FD89E](/var/folders/65/71xg97ds6hnc7_6xq9b987rh0000gp/T/com.yinxiang.Mac/WebKitDnD.RiKUDw/36B7A424-58C7-4306-B403-5024E72FD89E.png)

```javascript
promiseClick() {
	let p = new Promise(function (resolve, reject) {
  setTimeout(function () {
  	var num = Math.ceil(Math.random() * 20); //ç”Ÿæˆ1-10çš„éšæœºæ•°
    if (num <= 10) {
    	resolve(num);
    }
    else {
    	reject('æ•°å­—å¤ªäº10äº†å³å°†æ‰§è¡Œå¤±è´¥å›è°ƒ');
    }
  	}, 2000);
  })
  	return p
  }
componentDidMount(){
  promiseClick().then(res => {
  	console.log(res, '--å›è°ƒ--')
  }).catch(error => {
  	console.log(error, '--å¤±è´¥çš„å›è°ƒ--')
  })
}

```

**æ³¨æ„promiseæ•æ‰é”™è¯¯çš„å†™æ³•ï¼š**

![7037130E-92FF-4796-B54C-E41623ECD131](/var/folders/65/71xg97ds6hnc7_6xq9b987rh0000gp/T/com.yinxiang.Mac/WebKitDnD.ZcW2vd/7037130E-92FF-4796-B54C-E41623ECD131.png)

**promiseå¹¶å‘è¯·æ±‚ï¼š**

**allçš„ç”¨æ³•ï¼š**

Promise.allæ–¹æ³•ç”¨äºå°†å¤šä¸ª Promise å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚å¼‚æ­¥è¯·æ±‚çš„æ•°æ®æ˜¯ç­‰æ‰€æœ‰çš„æ•°æ®éƒ½è¯·æ±‚å®Œåä¸€æ¬¡æ€§è¿”å›æ¥

è¯­æ³•ï¼š

![D0CD1F4F-DB37-47DE-A3B3-21E52DF91373](/var/folders/65/71xg97ds6hnc7_6xq9b987rh0000gp/T/com.yinxiang.Mac/WebKitDnD.WQfBSc/D0CD1F4F-DB37-47DE-A3B3-21E52DF91373.png)

- Promise.all([äº‹ä»¶1ï¼Œäº‹ä»¶2ï¼Œäº‹ä»¶3]).then(res=>{ //å›è°ƒå›æ¥çš„æ•°æ® })

æ³¨ï¼špromise.allè¯·æ±‚å›æ¥çš„æ•°æ®åœ¨æ•°ç»„é‡Œçš„æ’åºå’Œè¯·æ±‚æ‰€éœ€çš„æ—¶é—´æ— å…³ğŸ‘†ï¼Œä¸è¯·æ±‚æ•°ç»„äº‹ä»¶çš„æ’åˆ—é¡ºåºæœ‰å…³ç³»ã€‚ğŸ‘‡

![041E9473-E28B-4BC7-AEBC-CE3491F7174B](/var/folders/65/71xg97ds6hnc7_6xq9b987rh0000gp/T/com.yinxiang.Mac/WebKitDnD.QnRwSj/041E9473-E28B-4BC7-AEBC-CE3491F7174B.png)

å¦‚æœå…¶ä¸­ä¸€ä¸ªå‡½æ•°æŠ¥é”™ï¼Œé‚£ä¹ˆæ²¡æœ‰è¿”å›ä¿¡æ¯ï¼Œè®°å¾—ç”¨catchæ•æ‰ä¸€ä¸‹é”™è¯¯ä¿¡æ¯

![62EAA054-D170-43B3-B9F9-AAE6CE437596](/var/folders/65/71xg97ds6hnc7_6xq9b987rh0000gp/T/com.yinxiang.Mac/WebKitDnD.K2kli2/62EAA054-D170-43B3-B9F9-AAE6CE437596.png)

- raceçš„ç”¨æ³•ï¼š

allæ˜¯ç­‰æ‰€æœ‰çš„å¼‚æ­¥æ“ä½œéƒ½æ‰§è¡Œå®Œäº†å†æ‰§è¡Œthenæ–¹æ³•ï¼Œé‚£ä¹ˆraceæ–¹æ³•å°±æ˜¯ç›¸åçš„ï¼Œè°å…ˆæ‰§è¡Œå®Œæˆå°±å…ˆæ‰§è¡Œå›è°ƒã€‚allæ˜¯å›è°ƒä¸€ä¸ªå›ºå®šçš„æ•°ç»„ï¼Œraceæ˜¯è°å…ˆå›è°ƒå›æ¥ï¼Œå°±å›è°ƒè°çš„æ•°æ®ç±»å‹å’Œå†…å®¹

![D72F8963-0B30-4D20-9DA1-EFC1B9E9CAEB](/var/folders/65/71xg97ds6hnc7_6xq9b987rh0000gp/T/com.yinxiang.Mac/WebKitDnD.jhq2g9/D72F8963-0B30-4D20-9DA1-EFC1B9E9CAEB.png)