#### 优先从缓存中加载

模块在第一次加载后会被缓存，这也意味着多次调用require()不会导致模块代码被执行多次。（不论是内置模块，用户自定义模块还是第三方模块，他们都会优先从缓存中加载，从而提高模块的加载效率）

#### 自定义模块的加载机制

使用require()加载自定义模块时，必须制定以./或../开头的路径标识符。在加载自定义模块时，如果没有指定./或../这样的路径标识符，则node会将它当做内置模块或第三方模块进行加载。

同事使用require()导入自定义模块时，如果省略了文件的扩展名，则nodejs会按顺序分别尝试加载一下的文件：

1.按照确切的文件名进行加载

2.补全.js扩展名进行加载

3.补全.json扩展名进行加载

4.补全.node扩展名进行加载

5.加载失败，终端报错

```
const text = require('./test')
//先找一个叫text的文件，如果没有就往下找一个叫text.js的文件，若无，则往下找text.json文件，再无，则找text.node文件，最终仍没找到则报错提示没找到文件
```



#### 第三方模块的加载机制

如果传递给require()的模块标识符，不是一个内置模块，也没有'./'或者'../'开头，则nodejs则会从当前模块的父目录开始，尝试/node_modules文件夹中加载第三方模块。

如果没有找到对应的第三方模块，则移动到再上一层目录中，进行加载，直到文件系统的根目录为止

##### 当把目录作为标识符，传递给require进行加载时，有三种加载方式：

1.在被加载的目录下查找一个叫做package.json文件，并寻找main属性，作为require加载的入口 

2.如果目录中没有package.json文件，或者main入口不存在或无法解析，则nodejs将试图加载目录下的indexjs文件。

3.如果以上两步都失败了，则nodejs会在终端打印错误消息，报告模块的缺失：Error:Cannot find module 'xx'

```
先找packjson中有没有main文件，有则找其入口文件；若无packjson则往下找index.js文件，若无，则报错提示
```

