#### rn事件处理

```
     1. 按钮按下事件：onPress          - 按下并松开按钮，会触发该事件(相当于PC的onclick)  
     2. 按钮长按事件：onLongPress  - 按住按钮不松开，会触发该事件(长按事件)
     3. 按钮按下事件：onPressIn       - 按下按钮不松开，会触发该事件(相当于PC的onkeydown)  
     4. 按钮松开事件：onPressOut    - 按下按钮后松开，或按下按钮后移动手指到按钮区域外，都会				触发该事件(相当于PC的onkeyup) 
```



#### RN 跳转



#### 编写样式：

- 使用StyleSheet.create来集中定义组件的样式。当一个标签内有多个样式时，使用数组来装载。写法与普通的css无异，只是css属性要用驼峰命名法。

  ```javascript
  import React from 'react';
  import { StyleSheet, Text, View } from 'react-native';
  const LotsOfStyles = () => {
      return (
        <View style={styles.container}>
  			  <Text style={styles.bigBlue}>just bigBlue</Text>
          <Text style={[styles.bigBlue, styles.red]}>bigBlue, then red</Text>
        </View>
      );
  };
  
  const styles = StyleSheet.create({
    container: {
      marginTop: 50,
    },
    bigBlue: {
      color: 'blue',
      fontWeight: 'bold',
      fontSize: 30,
    },
    red: {
      color: 'red',
    },
  });
  
  export default LotsOfStyles;
  
  ```

  

#### Text标签：

 Text 内部的元素不再使用 flexbox 布局，而是采用文本布局。并且不像div标签一样，会换行，他更像是span标签。

- numberoflines属性

  用于对Text组件限制显示的<font color='red'>文本行数</font>,超出部分用省略号代替。如果设为1，则不会发生换行情况，也不会出现省略号。

```
 <Text numberOfLines={2}>我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容</Text>
 
 //我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容
	 我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是……
```

- Selectable属性：是否可以长按选择文本实现复制和粘贴操作
- 

#### View标签：

view标签像div标签，使用view包装内容会换行的，并且可以使用flex布局,注意，不需要特地写display:'flex'的，直接写flex布局的一些语法就好，👇举个🌰。而要给包裹在view里面的text内容设置字体颜色则需在text上加，而不是在view上写，会不生效的。

```javascript
import React from 'react';
import { Text, View,StyleSheet } from 'react-native';

const BoldAndBeautiful = () => {
  return (
    <View style={styles.aaa}>
      <Text style={styles.bbb}>hello</Text>
      <Text style={styles.bbb}>baby</Text>
    </View>
  );
};

const styles =StyleSheet.create({
  aaa:{
    flex: 1,
    alignItems: 'center',
  },
  bbb:{
    color:'red'
  }
})


export default BoldAndBeautiful;
```

##### tips:

text如果单独设置文本颜色会很麻烦，可以用一个text包裹同一个区域的text标签，只要在最外层的text上设置颜色就可以了。

```javascript
<View style={styles.aaa}>
      <Text style={{color:'blue'}}>
        <Text>hello</Text>
        <Text>baby</Text>
      </Text>
    </View>
```



#### TextInput

允许用户输入文本的基础组件

onChangeText: 用户输入的事件,获取用户输入的内容

onSubmitEditing：提交时的事件（会在文本被提交后（用户按下软键盘上的提交键）调用）

常用属性：

- maxLength：设置长度
- multiline： 如果为true，文本框中科院输入多行文字，默认值为false只能填写一行文字。
  （注意安卓上如果设置`multiline = {true}`，文本默认会垂直居中，可设置`textAlignVertical: 'top'`样式来使其居顶显示）

- numberOfLines:设置输入框的行数。当 multiline 设置为 true 时使用它，可以占据对应的行数



#### button

默认颜色为蓝色，如需修改则设置color属性。接受style属性

设置指定button样式可以使用：TouchableOpacity，TouchableHighlight或者TouchableNativeFeedback

- TouchableHighlight：点击后会改变按钮颜色和透明度
- TouchableWithoutFeedback：单纯的用户点击触摸响应组件，不会改变视图UI，仅绑定press、longPress等事件；
- TouchableOpacity等封装组件以正确响应触摸操作



#### scrollView

滑动组件

##### flatList & SectionList(数据格式不同，场景不同，去选择不同的组件)

- FaltList：用于显示一个垂直的滚动列表，其中的元素之间结构近似而仅数据不同,原理跟虚拟列表近似，FaltList并不立即渲染所有元素，而是优先渲染屏幕上可见的元素。

  - data 列表的数据源
  - renderItem 从数据中逐个解析数据，然后返回一个设定好格式的组件来渲染

- SectionList：如果渲染的是一组需要分组的数据，也许还需带分组标签，那么使用SectionList是个不错的选择。

  

  ![image-20201021105310752](/Users/cole/Library/Application Support/typora-user-images/image-20201021105310752.png)



#### Dimensions ：判断设备屏幕的宽高



以下方法获取设备屏幕宽高：

```javascript
import React from 'react';
import {Dimensions} from 'react-native'

const Width = Dimensions.get('window').width;
const height = Dimensions.get('window').height;
```

注意：
尽管尺寸信息立即就可用，但它可能会在将来被修改（譬如设备的方向改变），所以基于这些常量的渲染逻辑和样式应当每次 render 之后都调用此函数，而不是将对应的值保存下来。（举例来说，你可能需要使用内联的样式而不是在`StyleSheet`中保存相应的尺寸）



####  Platform ：检测当前运行平台的模块

使用场景：如果组件只有小部分代码要依据平台定制，那么可以使用Platform

Platform.OS在IOS上回返回ios，安卓设备会返回android

```javascript
import {Platform} from 'react-native'

if(Platform.OS === 'ios'){console.log('处理点啥啥')}

//样式上的应用
const styles = StyleSheet.create({
  container: {
    flex: 1,
    ...Platform.select({
      ios: {
        backgroundColor: 'red'
      },
      android: {
        backgroundColor: 'blue'
      }
    })
  }
});
```



#### AppState

使用场景：判断前后台状态切换的场景

Active:前台运行状态

background:后台运用

inactive:前后台切换中，或者处于系统多任务视图中

```javascript
// 语法
const state = AppState.currentState
```

AppState支持事件监听：addEventListener() 和 removeEventListener

#### DeviceEventEmitter

监听或者跨页面传值，类似于发布订阅模式。

注意使用时要放在组件挂载后的生命周期里面，如果放在初始化或者构造函数内将不会触发

```javascript
import {DeviceEventEmitter} from 'react-native'

//发送内容
const msg = "is ok"
DeviceEventEmitter.emit('HELLO',msg)

//接收监听值
this.listen = DeviceEventEmitter.addListener("HELLO",()=>{
  console.log('这里就处理数据啦！~') //打印	得出 is ok
})

//组件销毁时，要将其销毁
componentWillUnmount(){
     DeviceEventEmitter.remove();
 };
```



